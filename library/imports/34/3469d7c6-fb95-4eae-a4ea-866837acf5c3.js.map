{"version":3,"sources":["assets/resources/script/Hall/Topbar.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Topbar extends cc.Component {\n\n    @property(cc.Node)\n    info: cc.Node = null;\n\n    player: any\n    protected onLoad(): void {\n        // 升级监听\n        EventManager.on('player_upgrade', this, () => { this.info.PathChild('level/val', cc.Label).string = `${PlayerInfo.level}`; })\n        // 金币监听\n        EventManager.on('player_gold', this, () => { this.info.PathChild('gold', cc.Label).string = `${PlayerInfo.gold}`; })\n        // 魔石监听\n        EventManager.on('player_diam', this, () => { this.info.PathChild('diam', cc.Label).string = `${PlayerInfo.diam}`; })\n        // 经验监听\n        EventManager.on('player_exp', this, () => {\n            this.info.PathChild('exp/mask').width = PlayerInfo.exp / this.getNextLevelExp(PlayerInfo.level) * this.info.PathChild('exp').width;\n            this.info.PathChild('exp/val', cc.Label).string = `${PlayerInfo.exp}/${this.getNextLevelExp(PlayerInfo.level)}`;\n        })\n    }\n\n    protected onDisable(): void {\n        EventManager.off('player_upgrade', this)\n        EventManager.off('player_gold', this)\n        EventManager.off('player_diam', this)\n        EventManager.off('player_exp', this)\n    }\n\n    protected onEnable(): void {\n        // 称号\n        this.info.PathChild('title/val', cc.Label).string = `${this.getTitle(PlayerInfo.title)}`;\n        // 等级\n        this.info.PathChild('level/val', cc.Label).string = `${PlayerInfo.level}`;\n        // 昵称\n        this.info.PathChild('nickname', cc.Label).string = `${PlayerInfo.nickname}`;\n        // 金币\n        this.info.PathChild('gold', cc.Label).string = `${PlayerInfo.gold}`;\n        // 魔石\n        this.info.PathChild('diam', cc.Label).string = `${PlayerInfo.diam}`;\n        // ID\n        this.info.PathChild('id', cc.Label).string = `ID:${PlayerInfo.id}`;\n        // 经验\n        this.info.PathChild('exp/mask').width = PlayerInfo.exp / this.getNextLevelExp(PlayerInfo.level) * this.info.PathChild('exp').width;\n        this.info.PathChild('exp/val', cc.Label).string = `${PlayerInfo.exp}/${this.getNextLevelExp(PlayerInfo.level)}`;\n    }\n\n    private getNextLevelExp(lv: number) {\n        return 1000;\n    }\n\n    private getTitle(val: number) {\n        return '无';\n    }\n}\n"]}