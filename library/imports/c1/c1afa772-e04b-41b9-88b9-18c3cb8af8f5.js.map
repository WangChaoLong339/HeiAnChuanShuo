{"version":3,"sources":["assets/resources/tool/UiManager.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AAAM,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAA+B,6BAAY;IAA3C;QAAA,qEAkDC;QA/CG,aAAO,GAAY,IAAI,CAAC;QAGxB,eAAS,GAAY,IAAI,CAAC;;IA4C9B,CAAC;IAxCG,0BAAM,GAAN;QACI,MAAM,CAAC,KAAK,GAAG,IAAI,CAAC;QAEpB,IAAI,CAAC,aAAa,GAAG,EAAE,CAAC;QACxB,IAAI,CAAC,eAAe,GAAG,EAAE,CAAC;IAC9B,CAAC;IAED,wBAAI,GAAJ,UAAK,IAAI,EAAE,IAAK;QAAhB,iBAkBC;QAjBG,EAAE,CAAC,GAAG,CAAC,kBAAgB,IAAM,CAAC,CAAC;QAC/B,IAAI,EAAE,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QAClC,IAAI,EAAE,EAAE;YACJ,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;YACjB,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;SAClC;aAAM;YACH,EAAE,CAAC,SAAS,CAAC,IAAI,CAAC,YAAU,IAAM,EAAE,EAAE,CAAC,MAAM,EAAE,UAAC,GAAG,EAAE,MAAM;gBACvD,IAAI,GAAG,EAAE;oBACL,OAAO,EAAE,CAAC,KAAK,CAAC,GAAG,CAAC,CAAC;iBACxB;gBACD,EAAE,GAAG,EAAE,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;gBAC5B,EAAE,CAAC,MAAM,GAAG,KAAI,CAAC,IAAI,CAAC;gBACtB,KAAI,CAAC,aAAa,CAAC,IAAI,CAAC,GAAG,EAAE,CAAC;gBAC9B,EAAE,CAAC,MAAM,GAAG,IAAI,CAAC;gBACjB,EAAE,CAAC,OAAO,IAAI,EAAE,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;YACnC,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IAED,yBAAK,GAAL,UAAM,IAAI;QACN,IAAI,IAAI,GAAG,IAAI,CAAC;QAChB,IAAI,OAAO,IAAI,IAAI,QAAQ,EAAE;YACzB,IAAI,GAAG,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC;SACzB;QAED,EAAE,CAAC,GAAG,CAAC,mBAAiB,IAAM,CAAC,CAAC;QAChC,IAAI,KAAK,GAAG,IAAI,CAAC,aAAa,CAAC,IAAI,CAAC,CAAC;QACrC,IAAI,KAAK,EAAE;YACP,KAAK,CAAC,OAAO,IAAI,KAAK,CAAC,OAAO,EAAE,CAAC;YACjC,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC;SACxB;IACL,CAAC;IA9CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;8CACM;IAGxB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACQ;IANjB,SAAS;QADrB,OAAO;OACK,SAAS,CAkDrB;IAAD,gBAAC;CAlDD,AAkDC,CAlD8B,EAAE,CAAC,SAAS,GAkD1C;AAlDY,8BAAS","file":"","sourceRoot":"/","sourcesContent":["const { ccclass, property } = cc._decorator;\n\n@ccclass\nexport class UiManager extends cc.Component {\n\n    @property(cc.Node)\n    uiLayer: cc.Node = null;\n\n    @property(cc.Node)\n    propLayer: cc.Node = null;\n\n    uiPrefabCache: Object\n    propPrefabCache: Object\n    onLoad() {\n        window.UiMgr = this;\n\n        this.uiPrefabCache = {};\n        this.propPrefabCache = {};\n    }\n\n    show(name, args?) {\n        cc.log(`show prefab: ${name}`);\n        let pb = this.uiPrefabCache[name];\n        if (pb) {\n            pb.active = true;\n            pb.onenter && pb.onenter(args);\n        } else {\n            cc.resources.load(`prefab/${name}`, cc.Prefab, (err, prefab) => {\n                if (err) {\n                    return cc.error(err);\n                }\n                pb = cc.instantiate(prefab);\n                pb.parent = this.node;\n                this.uiPrefabCache[name] = pb;\n                pb.active = true;\n                pb.onenter && pb.onenter(args);\n            })\n        }\n    }\n\n    close(args) {\n        let name = args;\n        if (typeof args == 'object') {\n            name = args.node.name;\n        }\n\n        cc.log(`close prefab: ${name}`);\n        let panel = this.uiPrefabCache[name];\n        if (panel) {\n            panel.onleave && panel.onleave();\n            panel.active = false;\n        }\n    }\n}"]}