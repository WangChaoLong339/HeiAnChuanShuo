{"version":3,"sources":["assets/resources/script/Home/Home.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,IAAM,OAAO,GAAG;IACZ,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,GAAG;IACvC,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,GAAG;IACxC,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,UAAU,EAAE,CAAC,GAAG;IACvC,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC,GAAG;IAChD,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,GAAG;IACxC,EAAE,IAAI,EAAE,IAAI,EAAE,GAAG,EAAE,EAAE,EAAE,UAAU,EAAE,EAAE,GAAG;CAC3C,CAAA;AAEK,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;QAAA,qEAiDC;QA9CG,UAAI,GAAY,IAAI,CAAC;QAGrB,UAAI,GAAY,IAAI,CAAC;;IA2CzB,CAAC;IAzCa,qBAAM,GAAhB;QACI,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,IAAI,CAAC,OAAO,GAAG,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QAC5C,IAAI,CAAC,cAAc,EAAE,CAAC;QACtB,YAAY,CAAC,EAAE,CAAC,gBAAgB,EAAE,IAAI,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAC3E,CAAC;IAES,wBAAS,GAAnB;QACI,YAAY,CAAC,GAAG,CAAC,gBAAgB,EAAE,IAAI,CAAC,CAAA;IAC5C,CAAC;IAEM,sBAAO,GAAd;QACI,IAAI,CAAC,cAAc,EAAE,CAAA;IACzB,CAAC;IAEM,sBAAO,GAAd;IACA,CAAC;IAEO,6BAAc,GAAtB;QACI,IAAI,CAAC,IAAI,CAAC,iBAAiB,EAAE,CAAA;QAC7B,IAAI,QAAQ,GAAY,WAAW,EAAE,CAAC;QACtC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,SAAS,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;YACzC,SAAS,CAAC,SAAS,CAAC,KAAK,EAAE,EAAE,CAAC,KAAK,CAAC,CAAC,MAAM,GAAG,KAAG,OAAO,CAAC,CAAC,CAAC,CAAC,IAAM,CAAA;YAClE,SAAS,CAAC,YAAY,CAAC,YAAY,CAAC,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;YAChD,SAAS,CAAC,GAAG,GAAG,CAAC,CAAA;YACjB,SAAS,CAAC,MAAM,GAAG,IAAI,CAAC,IAAI,CAAA;YAC5B,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,CAAC,QAAQ,CAAC,KAAK,GAAG,CAAC,GAAG,EAAE,CAAC,CAAA;YACrD,SAAS,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,GAAG,GAAG,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,GAAG,EAAE,CAAA;SAChG;IACL,CAAC;IAEO,6BAAc,GAAtB;QACI,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,UAAC,EAAE,EAAE,GAAG;YACxB,EAAE,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,MAAM,GAAG,OAAO,CAAC,GAAG,CAAC,CAAC,UAAU,GAAG,UAAU,CAAC,KAAK,CAAA;QAC5E,CAAC,CAAC,CAAA;IACN,CAAC;IAED,wBAAS,GAAT,UAAU,CAAC;QACP,IAAI,GAAG,GAAG,CAAC,CAAC,MAAM,CAAC,GAAG,CAAA;IAC1B,CAAC;IA7CD;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sCACG;IAGrB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;sCACG;IANJ,IAAI;QADxB,OAAO;OACa,IAAI,CAiDxB;IAAD,WAAC;CAjDD,AAiDC,CAjDiC,EAAE,CAAC,SAAS,GAiD7C;kBAjDoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["const HomeCfg = [\n    { name: '黑市', pfb: '', levelLimit: 5, },\n    { name: '铁匠铺', pfb: '', levelLimit: 8, },\n    { name: '成就', pfb: '', levelLimit: 0, },\n    { name: '冒险', pfb: 'Adventure', levelLimit: 0, },\n    { name: '副本', pfb: '', levelLimit: 10, },\n    { name: '深渊', pfb: '', levelLimit: 30, },\n]\n\nconst { ccclass, property } = cc._decorator;\n\n@ccclass\nexport default class Home extends cc.Component {\n\n    @property(cc.Node)\n    root: cc.Node = null;\n\n    @property(cc.Node)\n    item: cc.Node = null;\n\n    protected onLoad(): void {\n        this.node.onenter = this.onenter.bind(this);\n        this.node.onleave = this.onleave.bind(this);\n        this.createHomeItem();\n        EventManager.on('player_upgrade', this, this.updateItemLock.bind(this))\n    }\n\n    protected onDestroy(): void {\n        EventManager.off('player_upgrade', this)\n    }\n\n    public onenter(): void {\n        this.updateItemLock()\n    }\n\n    public onleave(): void {\n    }\n\n    private createHomeItem(): void {\n        this.root.removeAllChildren()\n        let viewSize: cc.Rect = GetViewSize();\n        for (let i = 0; i < HomeCfg.length; i++) {\n            let cloneItem = cc.instantiate(this.item)\n            cloneItem.PathChild('val', cc.Label).string = `${HomeCfg[i].name}`\n            cloneItem.getComponent('MultiFrame').SetFrame(i)\n            cloneItem.idx = i\n            cloneItem.parent = this.root\n            cloneItem.x = (i % 3 - 1) * (viewSize.width / 3 - 20)\n            cloneItem.y = (1 - Math.floor(i / 3) + 0.5) * this.item.height + (1 - Math.floor(i / 3)) * 40\n        }\n    }\n\n    private updateItemLock(): void {\n        this.root.EachChild((it, idx) => {\n            it.PathChild('lock').active = HomeCfg[idx].levelLimit > PlayerInfo.level\n        })\n    }\n\n    clickItem(e) {\n        let idx = e.target.idx\n    }\n}\n"]}